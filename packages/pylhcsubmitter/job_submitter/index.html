<!-- Elements added to main will be displayed on all pages --> <!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Documentation pages for the OMC Team at CERN. Content includes documentation on our activities, workflows and software as well as resources for members."><meta name=author content=PyLHC/OMC-Team><link href=https://pylhc.github.io/packages/pylhcsubmitter/job_submitter/ rel=canonical><link rel=icon href=../../../assets/logos/OMC_logo_inverse.svg><meta name=generator content="mkdocs-1.2.2, mkdocs-material-7.2.4"><title>Job Submitter - OMC Documentation</title><link rel=stylesheet href=../../../assets/stylesheets/main.f7f47774.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.3f5d1f46.min.css><meta name=theme-color content=#4051b5><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style><link rel=stylesheet href=../../../css/extra.css><meta name=google-site-verification content=NITofpPvpKgveUUE2aw1Dfpe984Cq24P302pI0P2mqo><meta name=keywords content="omc, omc3, wiki, cern, how-to, optics, resources, accelerator, pylhc, lhc, hl-lhc, submitter, htcondor, python"></head> <body dir=ltr data-md-color-scheme=preference data-md-color-primary=indigo data-md-color-accent=amber> <script>function __prefix(e){return new URL("../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#pylhc-submitter class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="OMC Documentation" class="md-header__button md-logo" aria-label="OMC Documentation" data-md-component=logo> <img src=../../../assets/logos/OMC_logo_inverse.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> OMC Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Job Submitter </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/pylhc/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> PyLHC </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../omc_team/about/ class=md-tabs__link> The OMC Team </a> </li> <li class=md-tabs__item> <a href=../../about/ class="md-tabs__link md-tabs__link--active"> Python Ecosystem </a> </li> <li class=md-tabs__item> <a href=../../../guis/about/ class=md-tabs__link> The OMC GUIs </a> </li> <li class=md-tabs__item> <a href=../../../procedures/info/ class=md-tabs__link> Procedures </a> </li> <li class=md-tabs__item> <a href=../../../resources/links/ class=md-tabs__link> Resources </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="OMC Documentation" class="md-nav__button md-logo" aria-label="OMC Documentation" data-md-component=logo> <img src=../../../assets/logos/OMC_logo_inverse.svg alt=logo> </a> OMC Documentation </label> <div class=md-nav__source> <a href=https://github.com/pylhc/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> PyLHC </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> The OMC Team <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="The OMC Team" data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> The OMC Team </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../omc_team/about/ class=md-nav__link> About </a> </li> <li class=md-nav__item> <a href=../../../omc_team/ideas/ class=md-nav__link> Future MD Ideas </a> </li> <li class=md-nav__item> <a href=../../../omc_team/physics/ class=md-nav__link> Physics of OMC </a> </li> <li class=md-nav__item> <a href=../../../omc_team/methods/ class=md-nav__link> OMC Methods </a> </li> <li class=md-nav__item> <a href=../../../omc_team/publications/ class=md-nav__link> Publications </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3> Python Ecosystem <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Python Ecosystem" data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Python Ecosystem </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../about/ class=md-nav__link> About </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2 type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2> omc3 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=omc3 data-md-level=2> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> omc3 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../omc3/about/ class=md-nav__link> About omc3 </a> </li> <li class=md-nav__item> <a href=../../omc3/getting_started/ class=md-nav__link> Getting Started </a> </li> <li class=md-nav__item> <a href=../../omc3/analysis/ class=md-nav__link> Analysis </a> </li> <li class=md-nav__item> <a href=../../omc3/know_how/ class=md-nav__link> Know-How </a> </li> <li class=md-nav__item> <a href=https://github.com/pylhc/omc3 class=md-nav__link> ↪ On Github </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3 type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3> PyLHC <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=PyLHC data-md-level=2> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> PyLHC </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../pylhc/about/ class=md-nav__link> About </a> </li> <li class=md-nav__item> <a href=../../pylhc/forced_da/ class=md-nav__link> Forced DA Analysis </a> </li> <li class=md-nav__item> <a href=../../pylhc/machine_settings_info/ class=md-nav__link> Machine Settings Info </a> </li> <li class=md-nav__item> <a href=../../pylhc/bsrt/ class=md-nav__link> BSRT Logger/Analysis </a> </li> <li class=md-nav__item> <a href=../../pylhc/bpm_calibration/ class=md-nav__link> BPM Calibration </a> </li> <li class=md-nav__item> <a href=https://github.com/pylhc/PyLHC class=md-nav__link> ↪ On Github </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_4 type=checkbox id=__nav_3_4 checked> <label class=md-nav__link for=__nav_3_4> PyLHC-Submitter <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=PyLHC-Submitter data-md-level=2> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> PyLHC-Submitter </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../about/ class=md-nav__link> About </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Job Submitter <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Job Submitter </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#using-the-job-submitter class=md-nav__link> Using the Job Submitter: </a> <nav class=md-nav aria-label="Using the Job Submitter:"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#starting-studies-from-python class=md-nav__link> Starting Studies from Python </a> </li> <li class=md-nav__item> <a href=#starting-studies-from-a-config-file class=md-nav__link> Starting Studies from a Config File </a> </li> <li class=md-nav__item> <a href=#starting-studies-from-the-command-line class=md-nav__link> Starting Studies from the Command Line </a> </li> <li class=md-nav__item> <a href=#starting-studies-with-mask-strings class=md-nav__link> Starting Studies with Mask Strings </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#what-happens-after-submitting class=md-nav__link> What Happens After Submitting </a> </li> <li class=md-nav__item> <a href=#checking-for-and-resubmitting-failed-jobs class=md-nav__link> Checking for and Resubmitting Failed Jobs </a> </li> <li class=md-nav__item> <a href=#pitfalls-and-hints class=md-nav__link> Pitfalls and Hints </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../autosix/ class=md-nav__link> AutoSix </a> </li> <li class=md-nav__item> <a href=https://github.com/pylhc/submitter class=md-nav__link> ↪ On Github </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_5 type=checkbox id=__nav_3_5> <label class=md-nav__link for=__nav_3_5> MESS <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=MESS data-md-level=2> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> MESS </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../mess/about/ class=md-nav__link> About </a> </li> <li class=md-nav__item> <a href=https://github.com/pylhc/MESS class=md-nav__link> ↪ On Github </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_6 type=checkbox id=__nav_3_6> <label class=md-nav__link for=__nav_3_6> Links to other Packages <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Links to other Packages" data-md-level=2> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> Links to other Packages </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=https://github.com/pylhc/optics_functions class=md-nav__link> ↪ optics-functions </a> </li> <li class=md-nav__item> <a href=https://github.com/pylhc/Beta-Beat.src class=md-nav__link> ↪ Beta-Beat.src </a> </li> <li class=md-nav__item> <a href=https://github.com/pylhc/tfs class=md-nav__link> ↪ tfs-pandas </a> </li> <li class=md-nav__item> <a href=https://github.com/pylhc/sdds class=md-nav__link> ↪ sdds </a> </li> <li class=md-nav__item> <a href=https://github.com/pylhc/generic_parser class=md-nav__link> ↪ generic-parser </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_7 type=checkbox id=__nav_3_7> <label class=md-nav__link for=__nav_3_7> Python Development <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Python Development" data-md-level=2> <label class=md-nav__title for=__nav_3_7> <span class="md-nav__icon md-icon"></span> Python Development </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../development/contributing/ class=md-nav__link> Contributing </a> </li> <li class=md-nav__item> <a href=../../development/howto_venv/ class=md-nav__link> Virtual Environments </a> </li> <li class=md-nav__item> <a href=../../development/howto_release/ class=md-nav__link> Releases </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> The OMC GUIs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="The OMC GUIs" data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> The OMC GUIs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guis/about/ class=md-nav__link> The OMC GUIs </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2 type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2> Beta-Beat GUI <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Beta-Beat GUI" data-md-level=2> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Beta-Beat GUI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guis/betabeat/gui/ class=md-nav__link> About </a> </li> <li class=md-nav__item> <a href=../../../guis/betabeat/beam_selection/ class=md-nav__link> Beam Selection </a> </li> <li class=md-nav__item> <a href=../../../guis/betabeat/bpm_panel/ class=md-nav__link> BPM Panel </a> </li> <li class=md-nav__item> <a href=../../../guis/betabeat/analysis_panel/ class=md-nav__link> Analysis Panel </a> </li> <li class=md-nav__item> <a href=../../../guis/betabeat/optics_panel/ class=md-nav__link> Optics Panel </a> </li> <li class=md-nav__item> <a href=../../../guis/betabeat/correction_panel/ class=md-nav__link> Correction Panel </a> </li> <li class=md-nav__item> <a href=../../../guis/betabeat/omc3/ class=md-nav__link> The omc3 branch </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3 type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3> Kmod GUI <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Kmod GUI" data-md-level=2> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Kmod GUI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guis/kmod/gui/ class=md-nav__link> About </a> </li> <li class=md-nav__item> <a href=../../../guis/kmod/load_model/ class=md-nav__link> Loading a Model </a> </li> <li class=md-nav__item> <a href=../../../guis/kmod/full_ip_trim/ class=md-nav__link> Full IP Trim </a> </li> <li class=md-nav__item> <a href=../../../guis/kmod/individual_modulation/ class=md-nav__link> Magnet Modulation </a> </li> <li class=md-nav__item> <a href=../../../guis/kmod/trim_analysis/ class=md-nav__link> Analyzing Trim Data </a> </li> <li class=md-nav__item> <a href=../../../guis/kmod/autotrim/ class=md-nav__link> Using Auto Trim </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4 type=checkbox id=__nav_4_4> <label class=md-nav__link for=__nav_4_4> Multiturn GUI <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Multiturn GUI" data-md-level=2> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> Multiturn GUI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guis/multiturn/gui/ class=md-nav__link> About </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5 type=checkbox id=__nav_4_5> <label class=md-nav__link for=__nav_4_5> Developing the GUIs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Developing the GUIs" data-md-level=2> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> Developing the GUIs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guis/developing/ide_install/ class=md-nav__link> IDE Setup </a> </li> <li class=md-nav__item> <a href=../../../guis/developing/releases/ class=md-nav__link> Releases </a> </li> <li class=md-nav__item> <a href=../../../guis/developing/kmod_special/ class=md-nav__link> KMod GUI hints </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> Procedures <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Procedures data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Procedures </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../procedures/info/ class=md-nav__link> Info </a> </li> <li class=md-nav__item> <a href=../../../procedures/kmod/ class=md-nav__link> K Modulation </a> </li> <li class=md-nav__item> <a href=../../../procedures/ampdet/ class=md-nav__link> Amplitude Detuning </a> </li> <li class=md-nav__item> <a href=../../../procedures/xing_scan/ class=md-nav__link> Crossing Angle Scan </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6> Resources <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Resources data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Resources </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../resources/links/ class=md-nav__link> Useful Links </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_2 type=checkbox id=__nav_6_2> <label class=md-nav__link for=__nav_6_2> How To's <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="How To's" data-md-level=2> <label class=md-nav__title for=__nav_6_2> <span class="md-nav__icon md-icon"></span> How To's </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../resources/howto/setup/ class=md-nav__link> Setup </a> </li> <li class=md-nav__item> <a href=../../../resources/howto/teleworking/ class=md-nav__link> Teleworking </a> </li> <li class=md-nav__item> <a href=../../../resources/howto/wiki/ class=md-nav__link> Editing Wiki </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../resources/publications/ class=md-nav__link> Publications </a> </li> <li class=md-nav__item> <a href=../../../resources/faqs/ class=md-nav__link> FAQ </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#using-the-job-submitter class=md-nav__link> Using the Job Submitter: </a> <nav class=md-nav aria-label="Using the Job Submitter:"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#starting-studies-from-python class=md-nav__link> Starting Studies from Python </a> </li> <li class=md-nav__item> <a href=#starting-studies-from-a-config-file class=md-nav__link> Starting Studies from a Config File </a> </li> <li class=md-nav__item> <a href=#starting-studies-from-the-command-line class=md-nav__link> Starting Studies from the Command Line </a> </li> <li class=md-nav__item> <a href=#starting-studies-with-mask-strings class=md-nav__link> Starting Studies with Mask Strings </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#what-happens-after-submitting class=md-nav__link> What Happens After Submitting </a> </li> <li class=md-nav__item> <a href=#checking-for-and-resubmitting-failed-jobs class=md-nav__link> Checking for and Resubmitting Failed Jobs </a> </li> <li class=md-nav__item> <a href=#pitfalls-and-hints class=md-nav__link> Pitfalls and Hints </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/pylhc/pylhc.github.io/edit/master/docs/packages/pylhcsubmitter/job_submitter.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1 id=pylhc-submitter>PyLHC Submitter<a class=headerlink href=#pylhc-submitter title="Permanent link">&para;</a></h1> <p><a href=https://pylhc.github.io/submitter/entrypoints/job_submitter.html>See the API documentation</a> for a detailed description of the code and the different parameters.</p> <p>Note that the full functionality is only available under Linux with <code>HTCondor</code> configured, e.g. on CERN's <code>lxplus</code> service. Currently, due to lack of htcondor Python bindings on <code>PypI</code> for <code>Windows</code> and <code>macOS</code>, only local job execution is possible for these platforms.</p> <h2 id=using-the-job-submitter>Using the Job Submitter:<a class=headerlink href=#using-the-job-submitter title="Permanent link">&para;</a></h2> <p>In the following examples, we will perform a tune sweep using a <code>MAD-X</code> mask. The simulations will be parametrized for both beams over a range of tunes in each plane. Parameters in the template script (see below) are indicated in the <code>%(PARAMETER)s</code> format.</p> <details class=example><summary>The <code>my_madx.mask</code> Template File</summary><div class=highlight><pre><span></span><code><span class=c>! ----- Create Symlinks to Resources ----- !</span>
<span class=n>option</span><span class=p>,</span> <span class=n>warn</span><span class=p>,</span> <span class=n>info</span><span class=p>;</span>
<span class=nb>system</span><span class=p>,</span> <span class=s2>&quot;mkdir Outputdata&quot;</span><span class=p>;</span>
<span class=nb>system</span><span class=p>,</span> <span class=s2>&quot;ln -fns /afs/cern.ch/eng/lhc/optics/V6.503 db5&quot;</span><span class=p>;</span>
<span class=nb>system</span><span class=p>,</span> <span class=s2>&quot;ln -fns /afs/cern.ch/eng/lhc/optics/SLHCV1.0 slhc&quot;</span><span class=p>;</span>
<span class=nb>system</span><span class=p>,</span> <span class=s2>&quot;ln -fns /afs/cern.ch/eng/lhc/optics/runII/2018 optics2018&quot;</span><span class=p>;</span>
<span class=c>!option, -echo, warn, -info;</span>

<span class=c>! ----- Make macros available  ----- !</span>
<span class=k>call</span><span class=p>,</span> <span class=k>file</span><span class=o>=</span><span class=s2>&quot;optics2018/toolkit/macro.madx&quot;</span><span class=p>;</span>

<span class=c>! ----- Beam Options  ----- !</span>
<span class=n>mylhcbeam</span><span class=o>=</span><span class=p>%(</span><span class=n>BEAM</span><span class=p>)</span><span class=n>s</span><span class=p>;</span>  <span class=c>! Will be replaced by values given to the submitter</span>
<span class=n>qx</span><span class=o>=</span><span class=p>%(</span><span class=n>TUNEX</span><span class=p>)</span><span class=n>s</span><span class=p>;</span>        <span class=c>! Will be replaced by values given to the submitter</span>
<span class=n>qy</span><span class=o>=</span><span class=p>%(</span><span class=n>TUNEY</span><span class=p>)</span><span class=n>s</span><span class=p>;</span>        <span class=c>! Will be replaced by values given to the submitter</span>
<span class=n>emittance</span><span class=o>=</span><span class=mf>3.75e-06</span><span class=p>;</span>
<span class=n>n_part</span><span class=o>=</span><span class=mf>1.0e10</span><span class=p>;</span>

<span class=c>! ----- Set up Lattice ----- !</span>
<span class=k>call</span><span class=p>,</span> <span class=k>file</span><span class=o>=</span><span class=s2>&quot;optics2018/lhc_as-built.seq&quot;</span><span class=p>;</span>  <span class=c>! LHC machine definition</span>

<span class=c>! -----  Definine the optics ----- !</span>
<span class=k>call</span><span class=p>,</span> <span class=k>file</span><span class=o>=</span><span class=s2>&quot;optics2018/PROTON/opticsfile.22_ctpps2&quot;</span><span class=p>;</span>  <span class=c>! Optics to Round 30cm collision optics</span>

<span class=c>! ----- Create Beams ----- !</span>
<span class=n>beam</span><span class=p>,</span> <span class=k>sequence</span><span class=o>=</span><span class=n>lhcb1</span><span class=p>,</span> <span class=n>bv</span><span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=n>energy</span><span class=o>=</span><span class=n>NRJ</span><span class=p>,</span> <span class=n>particle</span><span class=o>=</span><span class=n>proton</span><span class=p>,</span> <span class=n>npart</span><span class=o>=</span><span class=n>n_part</span><span class=p>,</span> <span class=n>kbunch</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>ex</span><span class=o>=</span><span class=n>emittance</span><span class=p>,</span> <span class=n>ey</span><span class=o>=</span><span class=n>emittance</span><span class=p>;</span>
<span class=n>beam</span><span class=p>,</span> <span class=k>sequence</span><span class=o>=</span><span class=n>lhcb2</span><span class=p>,</span> <span class=n>bv</span><span class=o>=-</span><span class=mi>1</span><span class=p>,</span> <span class=n>energy</span><span class=o>=</span><span class=n>NRJ</span><span class=p>,</span> <span class=n>particle</span><span class=o>=</span><span class=n>proton</span><span class=p>,</span> <span class=n>npart</span><span class=o>=</span><span class=n>n_part</span><span class=p>,</span> <span class=n>kbunch</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>ex</span><span class=o>=</span><span class=n>emittance</span><span class=p>,</span> <span class=n>ey</span><span class=o>=</span><span class=n>emittance</span><span class=p>;</span>

<span class=c>! ----- Tune Matching ----- !</span>
<span class=k>use</span><span class=p>,</span> <span class=k>sequence</span><span class=o>=</span><span class=n>lhcb</span><span class=p>%(</span><span class=n>BEAM</span><span class=p>)</span><span class=n>s</span><span class=p>;</span>
<span class=n>match</span><span class=p>,</span> <span class=n>chrom</span><span class=p>;</span>
    <span class=n>global</span><span class=p>,</span> <span class=n>q1</span><span class=o>=</span><span class=n>qx</span><span class=p>,</span> <span class=n>q2</span><span class=o>=</span><span class=n>qy</span><span class=p>;</span>
    <span class=n>vary</span><span class=p>,</span> <span class=n>name</span><span class=o>=</span><span class=n>dQx</span><span class=p>.</span><span class=n>b</span><span class=p>%(</span><span class=n>BEAM</span><span class=p>)</span><span class=n>s</span><span class=p>,</span> <span class=n>step</span><span class=o>=</span><span class=mf>1.0E-7</span><span class=p>;</span>  <span class=c>! Will be replaced by values given to the submitter</span>
    <span class=n>vary</span><span class=p>,</span> <span class=n>name</span><span class=o>=</span><span class=n>dQy</span><span class=p>.</span><span class=n>b</span><span class=p>%(</span><span class=n>BEAM</span><span class=p>)</span><span class=n>s</span><span class=p>,</span> <span class=n>step</span><span class=o>=</span><span class=mf>1.0E-7</span><span class=p>;</span>  <span class=c>! Will be replaced by values given to the submitter</span>
    <span class=n>lmdif</span><span class=p>,</span> <span class=n>calls</span><span class=o>=</span><span class=mi>100</span><span class=p>,</span> <span class=n>tolerance</span><span class=o>=</span><span class=mf>1.0E-21</span><span class=p>;</span>
<span class=n>endmatch</span><span class=p>;</span>

<span class=c>! ----- Output Twiss ----- !</span>
<span class=k>select</span><span class=p>,</span> <span class=n>flag</span><span class=o>=</span><span class=n>twiss</span><span class=p>,</span> <span class=n>clear</span><span class=p>;</span>
<span class=k>select</span><span class=p>,</span> <span class=n>flag</span><span class=o>=</span><span class=n>twiss</span><span class=p>,</span> <span class=n>pattern</span><span class=o>=</span><span class=s2>&quot;BPM&quot;</span><span class=p>,</span> <span class=n>column</span><span class=o>=</span><span class=n>name</span><span class=p>,</span><span class=n>s</span><span class=p>,</span><span class=n>x</span><span class=p>,</span><span class=n>y</span><span class=p>,</span><span class=n>betx</span><span class=p>,</span><span class=n>bety</span><span class=p>,</span><span class=n>alfx</span><span class=p>,</span><span class=n>alfy</span><span class=p>,</span><span class=n>dx</span><span class=p>,</span><span class=n>dpx</span><span class=p>,</span><span class=n>mux</span><span class=p>,</span><span class=n>muy</span><span class=p>;</span>
<span class=k>select</span><span class=p>,</span> <span class=n>flag</span><span class=o>=</span><span class=n>twiss</span><span class=p>,</span> <span class=n>pattern</span><span class=o>=</span><span class=s2>&quot;M&quot;</span><span class=p>,</span> <span class=n>column</span><span class=o>=</span><span class=n>name</span><span class=p>,</span><span class=n>s</span><span class=p>,</span><span class=n>x</span><span class=p>,</span><span class=n>y</span><span class=p>,</span><span class=n>betx</span><span class=p>,</span><span class=n>bety</span><span class=p>,</span><span class=n>alfx</span><span class=p>,</span><span class=n>alfy</span><span class=p>,</span><span class=n>dx</span><span class=p>,</span><span class=n>dpx</span><span class=p>,</span><span class=n>mux</span><span class=p>,</span><span class=n>muy</span><span class=p>;</span>
<span class=k>select</span><span class=p>,</span> <span class=n>flag</span><span class=o>=</span><span class=n>twiss</span><span class=p>,</span> <span class=n>pattern</span><span class=o>=</span><span class=s2>&quot;IP&quot;</span><span class=p>,</span> <span class=n>column</span><span class=o>=</span><span class=n>name</span><span class=p>,</span><span class=n>s</span><span class=p>,</span><span class=n>x</span><span class=p>,</span><span class=n>y</span><span class=p>,</span><span class=n>betx</span><span class=p>,</span><span class=n>bety</span><span class=p>,</span><span class=n>alfx</span><span class=p>,</span><span class=n>alfy</span><span class=p>,</span><span class=n>dx</span><span class=p>,</span><span class=n>dpx</span><span class=p>,</span><span class=n>mux</span><span class=p>,</span><span class=n>muy</span><span class=p>;</span>
<span class=n>twiss</span><span class=p>,</span> <span class=n>chrom</span><span class=p>,</span> <span class=k>file</span><span class=o>=</span><span class=s2>&quot;Outputdata/b%(BEAM)s.twiss.tfs&quot;</span><span class=p>;</span>  <span class=c>! Will be replaced by values given to the submitter</span>

<span class=c>! ----- Cleanup Symlinks ----- !</span>
<span class=nb>system</span><span class=p>,</span> <span class=s2>&quot;unlink db5&quot;</span><span class=p>;</span>
<span class=nb>system</span><span class=p>,</span> <span class=s2>&quot;unlink slhc&quot;</span><span class=p>;</span>
<span class=nb>system</span><span class=p>,</span> <span class=s2>&quot;unlink optics2018&quot;</span><span class=p>;</span>
</code></pre></div> </details> <h3 id=starting-studies-from-python>Starting Studies from Python<a class=headerlink href=#starting-studies-from-python title="Permanent link">&para;</a></h3> <details class=success><summary>Recommended Method</summary><p>Starting studies from Python is the recommended method, especially with a high number of parameters. As we will see later on, other methods methods require all parameter values to be written down while the pythonic way allows for an easier and clearer definition of the parameter space. </p> </details> <p>The parametrizing of simulations and submission to <code>HTCondor</code> through Python is as simple as calling the <code>main</code> function of the submitter with the desired parameters. See below: <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
<span class=kn>from</span> <span class=nn>pylhc_submitter.job_submitter</span> <span class=kn>import</span> <span class=n>main</span> <span class=k>as</span> <span class=n>htcondor_submit</span>

<span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&quot;__main__&quot;</span><span class=p>:</span>
    <span class=n>htcondor_submit</span><span class=p>(</span>
        <span class=n>executable</span><span class=o>=</span><span class=s2>&quot;madx&quot;</span><span class=p>,</span>  <span class=c1># default pointing to the latest MAD-X on afs</span>
        <span class=n>mask</span><span class=o>=</span><span class=s2>&quot;my_madx.mask&quot;</span><span class=p>,</span>  <span class=c1># template to fill and execute MAD-X on</span>
        <span class=n>replace_dict</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>  <span class=c1># parameters to look for and replace in the template file</span>
            <span class=n>BEAM</span><span class=o>=</span><span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>],</span>
            <span class=n>TUNEX</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>linspace</span><span class=p>(</span><span class=mf>62.3</span><span class=p>,</span> <span class=mf>62.32</span><span class=p>,</span> <span class=mi>11</span><span class=p>)</span><span class=o>.</span><span class=n>tolist</span><span class=p>(),</span>
            <span class=n>TUNEY</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>linspace</span><span class=p>(</span><span class=mf>60.31</span><span class=p>,</span> <span class=mf>60.33</span><span class=p>,</span> <span class=mi>11</span><span class=p>)</span><span class=o>.</span><span class=n>tolist</span><span class=p>(),</span>
        <span class=p>),</span>
        <span class=n>jobid_mask</span><span class=o>=</span><span class=s2>&quot;b</span><span class=si>%(BEAM)d</span><span class=s2>.qx</span><span class=si>%(TUNEX)s</span><span class=s2>.qy</span><span class=si>%(TUNEY)s</span><span class=s2>&quot;</span><span class=p>,</span>  <span class=c1># naming of the submitted jobfiles</span>
        <span class=n>working_directory</span><span class=o>=</span><span class=s2>&quot;/afs/cern.ch/work/u/username/study.tune_sweep&quot;</span><span class=p>,</span>  <span class=c1># outputs</span>
        <span class=n>jobflavour</span><span class=o>=</span><span class=s2>&quot;workday&quot;</span><span class=p>,</span>  <span class=c1># htcondor flavour</span>
    <span class=p>)</span>
</code></pre></div></p> <hr> <h3 id=starting-studies-from-a-config-file>Starting Studies from a Config File<a class=headerlink href=#starting-studies-from-a-config-file title="Permanent link">&para;</a></h3> <p>The same can also be achieved by specifying the previously called parameters in a <strong>config.ini</strong> file. It is worth noting that with any submission, the <code>job_submitter</code> will create such a file. See below the equivalent <strong>config.ini</strong> of the above Python example: <div class=highlight><pre><span></span><code>[DEFAULT]
executable=&quot;madx&quot;
mask=&quot;my_madx.mask&quot;
working_directory=&quot;/afs/cern.ch/work/u/username/study.tune_sweep&quot;
replace_dict={
    &quot;BEAM&quot;: [1, 2],
    &quot;TUNEX&quot;: [62.3, 62.302, 62.304, 62.306, 62.308, 62.31, 62.312, 62.314, 62.316, 62.318, 62.32],
    &quot;TUNEY&quot;: [60.31, 60.312, 60.314, 60.316, 60.318, 60.32, 60.322, 60.324, 60.326, 60.328, 60.33],
}
jobid_mask=&quot;b%(BEAM)d.qx%(TUNEX)s.qy%(TUNEY)s&quot;
jobflavour=&quot;workday&quot;
</code></pre></div></p> <p>The jobs are then started by calling the submitter on this file from the command line: <div class=highlight><pre><span></span><code>python -m pylhc_submitter.job_submitter --entry_cfg config.ini
</code></pre></div></p> <hr> <h3 id=starting-studies-from-the-command-line>Starting Studies from the Command Line<a class=headerlink href=#starting-studies-from-the-command-line title="Permanent link">&para;</a></h3> <div class="admonition warning"> <p class=admonition-title>Users Beware</p> <p>While doing so is possible, using a simple command line call is discouraged. As we will see in the example below, this method is not as clear as the previous ones, and prone to errors.</p> </div> <p>It is possible to skip the creation of a Python or a <strong>config.ini</strong> file completely when submitting, by providing parameters through the <code>replace_dict</code> flag at the command line. The above examples would be done through a (very lengthy) command line call as below: <div class=highlight><pre><span></span><code>python -m pylhc_submitter.job_submitter --executable madx --mask my_madx.mask --working_directory /afs/cern.ch/work/u/username/study.tune_sweep --replace_dict <span class=s2>&quot;{&#39;BEAM&#39;: [1, 2], &#39;TUNEX&#39;: [62.3, 62.302, 62.304, 62.306, 62.308, 62.31, 62.312, 62.314, 62.316, 62.318, 62.32], &#39;TUNEY&#39;: [60.31, 60.312, 60.314, 60.316, 60.318, 60.32, 60.322, 60.324, 60.326, 60.328, 60.33]}&quot;</span> --jobid_mask b%<span class=o>(</span>BEAM<span class=o>)</span>d.qx%<span class=o>(</span>TUNEX<span class=o>)</span>s.qy%<span class=o>(</span>TUNEY<span class=o>)</span>s --jobflavour workday
</code></pre></div></p> <hr> <h3 id=starting-studies-with-mask-strings>Starting Studies with Mask Strings<a class=headerlink href=#starting-studies-with-mask-strings title="Permanent link">&para;</a></h3> <p>Instead of using a mask file, <code>job_submitter</code> can also use a string as input for the executable. This can prove useful if the executable has a number of variable input parameters, i.e. <code>executable --param1 X --param2 Y</code>.</p> <p>A simple mask string call using the <strong>config.ini</strong> input to the pylhc-submitter would look like this: <div class=highlight><pre><span></span><code>[DEFAULT]
executable=&quot;expr&quot;
mask=&quot;%(SUMMAND1)s + %(SUMMAND2)s &gt; Outputdata/result.txt&quot;
working_directory=&quot;/afs/cern.ch/work/u/username/study.addition&quot;
replace_dict={&quot;SUMMAND1&quot;: [1, 2, 3, 4], &quot;SUMMAND2&quot;: [6, 7, 8, 9]}
run_local=True
num_processes=4
</code></pre></div></p> <p>Note that again, the user has to take care that the required results are saved in the correct <code>job_output_dir</code>. The <code>mask</code> string can be a more complicated multiline string, executing multiple commands.</p> <details class=example><summary>Example Multiline Config File</summary><div class=highlight><pre><span></span><code>[DEFAULT]
executable=None
mask=&quot;madx &lt; Job%(SEED)s.madx\n
      python -m analysis.main --method %(METHOD)s&quot;
working_directory=&quot;/afs/cern.ch/work/u/username/study.multiline&quot;
replace_dict={&quot;SEED&quot;= [1, 2, 3, 4], &quot;METHOD&quot;= [&#39;fast&#39;, &#39;slow&#39;, &#39;new&#39;]}
run_local=True
num_processes=4
</code></pre></div> </details> <hr> <h2 id=what-happens-after-submitting>What Happens After Submitting<a class=headerlink href=#what-happens-after-submitting title="Permanent link">&para;</a></h2> <p>When submitting, the <code>job_submitter</code> determines jobs to be submitted to <code>HTCondor</code> through the inner product of the <code>replace_dict</code>: in our example each possible combination of the 3 given parameters. The script will issue several logging statements to keep the user updated, but here is what happens behind the scenes.</p> <p>A folder structure is created in the given <code>working directory</code>, in which one will find:</p> <ul> <li>A <strong>Job.tfs</strong> file, a global summary dataframe in which each row corresponds to a set of parameters filled in for one submitted job:<ul> <li>The first column, <code>JobId</code>, is either numbering of the jobs or - in our case - the filled in <code>jobid_mask</code>,</li> <li>The next columns are the given parameters, here: <code>BEAM</code>, <code>TUNEX</code> and <code>TUNEY</code>. They contain the value filled in the respective job-instance of said row,</li> <li>The <code>JobDirectory</code>, <code>JobFile</code> and <code>ShellScript</code> columns respectively contain the path to the job directory, the name of the filled mask file and the name of the script which are used to run the job.</li> </ul> </li> <li>A <strong>queuehtc.sub</strong> file, the <code>HTCondor</code> submission file used, which tells <code>HTCondor</code> the paths to all the <code>ShellScripts</code> to run.</li> <li>Many sub-directories named according to the <code>jobid_mask</code>, one per job, each with:<ul> <li>A <code>ShellScript</code> <strong><jobid>.sh</strong>, which contains commands to create the <code>job_output_dir</code> and the <code>madx</code> command to run the script,</li> <li>A <code>JobFile</code> which is the original <code>mask</code>, parameter values filled in.</li> </ul> </li> </ul> <details class=tip><summary>Dry Runs</summary><p>In case one runs the submitter with the <code>dryrun</code> flag, the execution stops here and prepared files are accessible, but nothing is sent to the <code>HTCondor</code> scheduler. One can use this option to perform a thorough check before using <code>condor_submit</code> on the created submission file <strong>queuehtc.sub</strong>.</p> </details> <details class=warning><summary>Number of Jobs</summary><p>As <code>job_submitter</code> creates a job for each combination in the inner product of the <code>replace_dict</code> parameters, the number of jobs can easily get high. In our example case, we are submitting <code>beam * tunex * tuney = 2 * 11 * 11 = 242</code> jobs. It is worth noting that currently the maximum number of jobs to be submitted to <code>HTCondor</code> is set to <code>100k</code>.</p> </details> <p>After submitting our tune sweep studies, we can check the status of our jobs via the <code>condor_q</code> (unless running locally). The output should look something like this:</p> <figure> <img src=../../../assets/images/job_submitter/tune_sweep_condor_q.png width=100%> <figcaption><code>condor_q</code>: Shows the jobs in the condor queue.</figcaption> </figure> <p>When all jobs are done running, the <code>htcondor.&lt;jobid&gt;.err</code>, <code>htcondor.&lt;jobid&gt;.log</code> and <code>htcondor.&lt;jobid&gt;.out</code> files for the respective job are transferred back to the appropriate directories. Finally, for each job the <code>job_output_dir</code>, here containing the <strong>.twiss.tfs</strong> file, will be transfered back as well, ready for post-processing.</p> <h2 id=checking-for-and-resubmitting-failed-jobs>Checking for and Resubmitting Failed Jobs<a class=headerlink href=#checking-for-and-resubmitting-failed-jobs title="Permanent link">&para;</a></h2> <p>To see if and which Jobs have failed, the same command as above can be rerun using <code>resume_jobs</code> and <code>dryrun</code> flags (or use them as parameters set to <code>True</code>). By default, Jobs are classified as successful if the specified <code>job_output_dir</code> is present.</p> <!-- TODO add example script output --> <p>To resubmit the failed jobs to <code>HTCondor</code>, simply rerun the call and omit the <code>dryrun</code> flag or set its parameter to <code>False</code>.</p> <div class="admonition tip"> <p class=admonition-title>Refining the Resubmission</p> <p>To further refine the resubmission, the script can also check for the presence of files in the <code>job_output_dir</code> by using the <code>check_files</code> flag. In the case of our tune sweep example, this would look like <code>check_files=["*.twiss.tfs"]</code>.</p> </div> <h2 id=pitfalls-and-hints>Pitfalls and Hints<a class=headerlink href=#pitfalls-and-hints title="Permanent link">&para;</a></h2> <div class="admonition warning"> <p class=admonition-title>The <code>ssh</code> Option</p> <p>When using the <code>ssh</code> option, the working directory needs to be accessible from both the local machine as well as the <code>ssh</code> server. In this case, <code>ssh</code> is only used for the final command submitting the jobs to <code>HTCondor</code>.</p> </div> <div class="admonition warning"> <p class=admonition-title>Running Locally</p> <p>The <code>run_local</code> flag allows parallelizing jobs on your local machine through multiprocessing. This is only recommended for short jobs and for a small number of jobs, as the stress on your machine can be intense. The <code>num_processes</code> option allows to specify how many concurrent processes will run, by default 4.</p> </div> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <!-- Copyright and theme information --> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2020 PyLHC/OMC-Team </div> powered by <a href=https://www.mkdocs.org title=MkDocs>MkDocs</a> and <a href=https://squidfunk.github.io/mkdocs-material/ title="Material for MkDocs"> Material for MkDocs</a> </div> <div class=md-footer-social> <a href=https://github.com/pylhc target=_blank rel=noopener title="OMC's Organisation on Github" class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=mailto:OMC-team@cern.ch target=_blank rel=noopener title="Email the OMC team" class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><path d="M476 3.2 12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.tabs", "navigation.instant"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../assets/javascripts/workers/search.709b4209.min.js", "version": null}</script> <script src=../../../assets/javascripts/bundle.febc23d1.min.js></script> <script src=../../../javascripts/config.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> </body> </html>